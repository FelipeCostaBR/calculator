{"ast":null,"code":"import _objectWithoutProperties from\"/Users/felipePC/Desktop/javascript-basic-projects/calculator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _classCallCheck from\"/Users/felipePC/Desktop/javascript-basic-projects/calculator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/felipePC/Desktop/javascript-basic-projects/calculator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/felipePC/Desktop/javascript-basic-projects/calculator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/felipePC/Desktop/javascript-basic-projects/calculator/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import ReactDOM from'react-dom';import PointTarget from'react-point';import'./index.css';import AutoScalingText from'./components/AutoScalingText';var CalculatorDisplay=/*#__PURE__*/function(_React$Component){_inherits(CalculatorDisplay,_React$Component);var _super=_createSuper(CalculatorDisplay);function CalculatorDisplay(){_classCallCheck(this,CalculatorDisplay);return _super.apply(this,arguments);}_createClass(CalculatorDisplay,[{key:\"render\",value:function render(){var _this$props=this.props,value=_this$props.value,props=_objectWithoutProperties(_this$props,[\"value\"]);var language=navigator.language||'en-US';var formattedValue=parseFloat(value).toLocaleString(language,{useGrouping:true,maximumFractionDigits:6});// Add back missing .0 in e.g. 12.0\nvar match=value.match(/\\.\\d*?(0*)$/);if(match)formattedValue+=/[1-9]/.test(match[0])?match[1]:match[0];return/*#__PURE__*/React.createElement(\"div\",Object.assign({},props,{className:\"calculator-display\"}),/*#__PURE__*/React.createElement(AutoScalingText,null,formattedValue));}}]);return CalculatorDisplay;}(React.Component);var CalculatorKey=/*#__PURE__*/function(_React$Component2){_inherits(CalculatorKey,_React$Component2);var _super2=_createSuper(CalculatorKey);function CalculatorKey(){_classCallCheck(this,CalculatorKey);return _super2.apply(this,arguments);}_createClass(CalculatorKey,[{key:\"render\",value:function render(){var _this$props2=this.props,onPress=_this$props2.onPress,className=_this$props2.className,props=_objectWithoutProperties(_this$props2,[\"onPress\",\"className\"]);return/*#__PURE__*/React.createElement(PointTarget,{onPoint:onPress},/*#__PURE__*/React.createElement(\"button\",Object.assign({className:\"calculator-key \".concat(className)},props)));}}]);return CalculatorKey;}(React.Component);var CalculatorOperations={'/':function _(prevValue,nextValue){return prevValue/nextValue;},'*':function _(prevValue,nextValue){return prevValue*nextValue;},'+':function _(prevValue,nextValue){return prevValue+nextValue;},'-':function _(prevValue,nextValue){return prevValue-nextValue;},'=':function _(prevValue,nextValue){return nextValue;}};var Calculator=/*#__PURE__*/function(_React$Component3){_inherits(Calculator,_React$Component3);var _super3=_createSuper(Calculator);function Calculator(){var _this;_classCallCheck(this,Calculator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super3.call.apply(_super3,[this].concat(args));_this.state={value:null,displayValue:'0',operator:null,waitingForOperand:false};_this.handleKeyDown=function(event){var key=event.key;if(key==='Enter')key='=';if(/\\d/.test(key)){event.preventDefault();_this.inputDigit(parseInt(key,10));}else if(key in CalculatorOperations){event.preventDefault();_this.performOperation(key);}else if(key==='.'){event.preventDefault();_this.inputDot();}else if(key==='%'){event.preventDefault();_this.inputPercent();}else if(key==='Backspace'){event.preventDefault();_this.clearLastChar();}else if(key==='Clear'){event.preventDefault();if(_this.state.displayValue!=='0'){_this.clearDisplay();}else{_this.clearAll();}}};return _this;}_createClass(Calculator,[{key:\"clearAll\",value:function clearAll(){this.setState({value:null,displayValue:'0',operator:null,waitingForOperand:false});}},{key:\"clearDisplay\",value:function clearDisplay(){this.setState({displayValue:'0'});}},{key:\"clearLastChar\",value:function clearLastChar(){var displayValue=this.state.displayValue;this.setState({displayValue:displayValue.substring(0,displayValue.length-1)||'0'});}},{key:\"toggleSign\",value:function toggleSign(){var displayValue=this.state.displayValue;var newValue=parseFloat(displayValue)*-1;this.setState({displayValue:String(newValue)});}},{key:\"inputPercent\",value:function inputPercent(){var displayValue=this.state.displayValue;var currentValue=parseFloat(displayValue);if(currentValue===0)return;var fixedDigits=displayValue.replace(/^-?\\d*\\.?/,'');var newValue=parseFloat(displayValue)/100;this.setState({displayValue:String(newValue.toFixed(fixedDigits.length+2))});}},{key:\"inputDot\",value:function inputDot(){var displayValue=this.state.displayValue;if(!/\\./.test(displayValue)){this.setState({displayValue:displayValue+'.',waitingForOperand:false});}}},{key:\"inputDigit\",value:function inputDigit(digit){var _this$state=this.state,displayValue=_this$state.displayValue,waitingForOperand=_this$state.waitingForOperand;if(waitingForOperand){this.setState({displayValue:String(digit),waitingForOperand:false});}else{this.setState({displayValue:displayValue==='0'?String(digit):displayValue+digit});}}},{key:\"performOperation\",value:function performOperation(nextOperator){var _this$state2=this.state,value=_this$state2.value,displayValue=_this$state2.displayValue,operator=_this$state2.operator;var inputValue=parseFloat(displayValue);if(value==null){this.setState({value:inputValue});}else if(operator){var currentValue=value||0;var newValue=CalculatorOperations[operator](currentValue,inputValue);this.setState({value:newValue,displayValue:String(newValue)});}this.setState({waitingForOperand:true,operator:nextOperator});}},{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('keydown',this.handleKeyDown);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('keydown',this.handleKeyDown);}},{key:\"render\",value:function render(){var _this2=this;var displayValue=this.state.displayValue;var clearDisplay=displayValue!=='0';var clearText=clearDisplay?'C':'AC';return/*#__PURE__*/React.createElement(\"div\",{className:\"calculator\"},/*#__PURE__*/React.createElement(CalculatorDisplay,{value:displayValue}),/*#__PURE__*/React.createElement(\"div\",{className:\"calculator-keypad\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-keys\"},/*#__PURE__*/React.createElement(\"div\",{className:\"function-keys\"},/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-clear\",onPress:function onPress(){return clearDisplay?_this2.clearDisplay():_this2.clearAll();}},clearText),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-sign\",onPress:function onPress(){return _this2.toggleSign();}},\"\\xB1\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-percent\",onPress:function onPress(){return _this2.inputPercent();}},\"%\")),/*#__PURE__*/React.createElement(\"div\",{className:\"digit-keys\"},/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-0\",onPress:function onPress(){return _this2.inputDigit(0);}},\"0\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-dot\",onPress:function onPress(){return _this2.inputDot();}},\"\\u25CF\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-1\",onPress:function onPress(){return _this2.inputDigit(1);}},\"1\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-2\",onPress:function onPress(){return _this2.inputDigit(2);}},\"2\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-3\",onPress:function onPress(){return _this2.inputDigit(3);}},\"3\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-4\",onPress:function onPress(){return _this2.inputDigit(4);}},\"4\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-5\",onPress:function onPress(){return _this2.inputDigit(5);}},\"5\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-6\",onPress:function onPress(){return _this2.inputDigit(6);}},\"6\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-7\",onPress:function onPress(){return _this2.inputDigit(7);}},\"7\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-8\",onPress:function onPress(){return _this2.inputDigit(8);}},\"8\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-9\",onPress:function onPress(){return _this2.inputDigit(9);}},\"9\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"operator-keys\"},/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-divide\",onPress:function onPress(){return _this2.performOperation('/');}},\"\\xF7\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-multiply\",onPress:function onPress(){return _this2.performOperation('*');}},\"\\xD7\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-subtract\",onPress:function onPress(){return _this2.performOperation('-');}},\"\\u2212\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-add\",onPress:function onPress(){return _this2.performOperation('+');}},\"+\"),/*#__PURE__*/React.createElement(CalculatorKey,{className:\"key-equals\",onPress:function onPress(){return _this2.performOperation('=');}},\"=\"))));}}]);return Calculator;}(React.Component);ReactDOM.render(/*#__PURE__*/React.createElement(Calculator,null),document.getElementById('app'));","map":{"version":3,"sources":["/Users/felipePC/Desktop/javascript-basic-projects/calculator/src/index.js"],"names":["React","ReactDOM","PointTarget","AutoScalingText","CalculatorDisplay","props","value","language","navigator","formattedValue","parseFloat","toLocaleString","useGrouping","maximumFractionDigits","match","test","Component","CalculatorKey","onPress","className","CalculatorOperations","prevValue","nextValue","Calculator","state","displayValue","operator","waitingForOperand","handleKeyDown","event","key","preventDefault","inputDigit","parseInt","performOperation","inputDot","inputPercent","clearLastChar","clearDisplay","clearAll","setState","substring","length","newValue","String","currentValue","fixedDigits","replace","toFixed","digit","nextOperator","inputValue","document","addEventListener","removeEventListener","clearText","toggleSign","render","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PointTarget from 'react-point'\nimport './index.css';\nimport AutoScalingText from './components/AutoScalingText'\n\n\nclass CalculatorDisplay extends React.Component {\n  render() {\n    const { value, ...props } = this.props\n    \n    const language = navigator.language || 'en-US'\n    let formattedValue = parseFloat(value).toLocaleString(language, {\n      useGrouping: true,\n      maximumFractionDigits: 6\n    })\n    \n    // Add back missing .0 in e.g. 12.0\n    const match = value.match(/\\.\\d*?(0*)$/)\n    \n    if (match)\n      formattedValue += (/[1-9]/).test(match[0]) ? match[1] : match[0]\n    \n    return (\n      <div {...props} className=\"calculator-display\">\n        <AutoScalingText>{formattedValue}</AutoScalingText>\n      </div>\n    )\n  }\n}\n\nclass CalculatorKey extends React.Component {\n  render() {\n    const { onPress, className, ...props } = this.props\n    \n    return (\n      <PointTarget onPoint={onPress}>\n        <button className={`calculator-key ${className}`} {...props}/>\n      </PointTarget>\n    )\n  }\n}\n\nconst CalculatorOperations = {\n  '/': (prevValue, nextValue) => prevValue / nextValue,\n  '*': (prevValue, nextValue) => prevValue * nextValue,\n  '+': (prevValue, nextValue) => prevValue + nextValue,\n  '-': (prevValue, nextValue) => prevValue - nextValue,\n  '=': (prevValue, nextValue) => nextValue\n}\n\nclass Calculator extends React.Component {\n  state = {\n    value: null,\n    displayValue: '0',\n    operator: null,\n    waitingForOperand: false\n  };\n  \n  clearAll() {\n    this.setState({\n      value: null,\n      displayValue: '0',\n      operator: null,\n      waitingForOperand: false\n    })\n  }\n\n  clearDisplay() {\n    this.setState({\n      displayValue: '0'\n    })\n  }\n  \n  clearLastChar() {\n    const { displayValue } = this.state\n    \n    this.setState({\n      displayValue: displayValue.substring(0, displayValue.length - 1) || '0'\n    })\n  }\n  \n  toggleSign() {\n    const { displayValue } = this.state\n    const newValue = parseFloat(displayValue) * -1\n    \n    this.setState({\n      displayValue: String(newValue)\n    })\n  }\n  \n  inputPercent() {\n    const { displayValue } = this.state\n    const currentValue = parseFloat(displayValue)\n    \n    if (currentValue === 0)\n      return\n    \n    const fixedDigits = displayValue.replace(/^-?\\d*\\.?/, '')\n    const newValue = parseFloat(displayValue) / 100\n    \n    this.setState({\n      displayValue: String(newValue.toFixed(fixedDigits.length + 2))\n    })\n  }\n  \n  inputDot() {\n    const { displayValue } = this.state\n    \n    if (!(/\\./).test(displayValue)) {\n      this.setState({\n        displayValue: displayValue + '.',\n        waitingForOperand: false\n      })\n    }\n  }\n  \n  inputDigit(digit) {\n    const { displayValue, waitingForOperand } = this.state\n    \n    if (waitingForOperand) {\n      this.setState({\n        displayValue: String(digit),\n        waitingForOperand: false\n      })\n    } else {\n      this.setState({\n        displayValue: displayValue === '0' ? String(digit) : displayValue + digit\n      })\n    }\n  }\n  \n  performOperation(nextOperator) {    \n    const { value, displayValue, operator } = this.state\n    const inputValue = parseFloat(displayValue)\n    \n    if (value == null) {\n      this.setState({\n        value: inputValue\n      })\n    } else if (operator) {\n      const currentValue = value || 0\n      const newValue = CalculatorOperations[operator](currentValue, inputValue)\n      \n      this.setState({\n        value: newValue,\n        displayValue: String(newValue)\n      })\n    }\n    \n    this.setState({\n      waitingForOperand: true,\n      operator: nextOperator\n    })\n  }\n  \n  handleKeyDown = (event) => {\n    let { key } = event\n    \n    if (key === 'Enter')\n      key = '='\n    \n    if ((/\\d/).test(key)) {\n      event.preventDefault()\n      this.inputDigit(parseInt(key, 10))\n    } else if (key in CalculatorOperations) {\n      event.preventDefault()\n      this.performOperation(key)\n    } else if (key === '.') {\n      event.preventDefault()\n      this.inputDot()\n    } else if (key === '%') {\n      event.preventDefault()\n      this.inputPercent()\n    } else if (key === 'Backspace') {\n      event.preventDefault()\n      this.clearLastChar()\n    } else if (key === 'Clear') {\n      event.preventDefault()\n      \n      if (this.state.displayValue !== '0') {\n        this.clearDisplay()\n      } else {\n        this.clearAll()\n      }\n    }\n  };\n  \n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown)\n  }\n  \n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown)\n  }\n  \n  render() {\n    const { displayValue } = this.state\n    \n    const clearDisplay = displayValue !== '0'\n    const clearText = clearDisplay ? 'C' : 'AC'\n    \n    return (\n      <div className=\"calculator\">\n        <CalculatorDisplay value={displayValue}/>\n        <div className=\"calculator-keypad\">\n          <div className=\"input-keys\">\n            <div className=\"function-keys\">\n              <CalculatorKey className=\"key-clear\" onPress={() => clearDisplay ? this.clearDisplay() : this.clearAll()}>{clearText}</CalculatorKey>\n              <CalculatorKey className=\"key-sign\" onPress={() => this.toggleSign()}>±</CalculatorKey>\n              <CalculatorKey className=\"key-percent\" onPress={() => this.inputPercent()}>%</CalculatorKey>\n            </div>\n            <div className=\"digit-keys\">\n              <CalculatorKey className=\"key-0\" onPress={() => this.inputDigit(0)}>0</CalculatorKey>\n              <CalculatorKey className=\"key-dot\" onPress={() => this.inputDot()}>●</CalculatorKey>\n              <CalculatorKey className=\"key-1\" onPress={() => this.inputDigit(1)}>1</CalculatorKey>\n              <CalculatorKey className=\"key-2\" onPress={() => this.inputDigit(2)}>2</CalculatorKey>\n              <CalculatorKey className=\"key-3\" onPress={() => this.inputDigit(3)}>3</CalculatorKey>\n              <CalculatorKey className=\"key-4\" onPress={() => this.inputDigit(4)}>4</CalculatorKey>\n              <CalculatorKey className=\"key-5\" onPress={() => this.inputDigit(5)}>5</CalculatorKey>\n              <CalculatorKey className=\"key-6\" onPress={() => this.inputDigit(6)}>6</CalculatorKey>\n              <CalculatorKey className=\"key-7\" onPress={() => this.inputDigit(7)}>7</CalculatorKey>\n              <CalculatorKey className=\"key-8\" onPress={() => this.inputDigit(8)}>8</CalculatorKey>\n              <CalculatorKey className=\"key-9\" onPress={() => this.inputDigit(9)}>9</CalculatorKey>\n            </div>\n          </div>\n          <div className=\"operator-keys\">\n            <CalculatorKey className=\"key-divide\" onPress={() => this.performOperation('/')}>÷</CalculatorKey>\n            <CalculatorKey className=\"key-multiply\" onPress={() => this.performOperation('*')}>×</CalculatorKey>\n            <CalculatorKey className=\"key-subtract\" onPress={() => this.performOperation('-')}>−</CalculatorKey>\n            <CalculatorKey className=\"key-add\" onPress={() => this.performOperation('+')}>+</CalculatorKey>\n            <CalculatorKey className=\"key-equals\" onPress={() => this.performOperation('=')}>=</CalculatorKey>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nReactDOM.render(\n  <Calculator/>,\n  document.getElementById('app')\n)"]},"metadata":{},"sourceType":"module"}